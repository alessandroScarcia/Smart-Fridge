\hypertarget{calorie_8c}{}\section{Riferimenti per il file src/calorie.c}
\label{calorie_8c}\index{src/calorie.\+c@{src/calorie.\+c}}
{\ttfamily \#include \char`\"{}calorie.\+h\char`\"{}}\newline
\subsection*{Funzioni}
\begin{DoxyCompactItemize}
\item 
char $\ast$ \hyperlink{calorie_8c_aab4f1124bc81a30708b9520671ef672b}{input\+\_\+nome\+\_\+assunzione} ()
\item 
unsigned short int \hyperlink{calorie_8c_a90efaa78bd85014349089f4e607720dd}{input\+\_\+kcal\+\_\+libere} ()
\item 
int \hyperlink{calorie_8c_a6e41da04fc6821fa1b6bf2bed8e2d307}{input\+\_\+alimento\+\_\+consumato} ()
\item 
unsigned short int \hyperlink{calorie_8c_a7911299a005ffc33f45edd4e6f6c5a75}{calcolo\+\_\+kcal} (unsigned short int kcal, int campione, float q\+\_\+consumata)
\item 
int \hyperlink{calorie_8c_aad23ab12f44405ba4e09e437a448d0b1}{aggiorno\+\_\+database\+\_\+calorie} (char nome\+\_\+consumo\mbox{[}$\,$\mbox{]}, int flag\+\_\+consumo, float quantita\+\_\+consumo, char nickname\mbox{[}$\,$\mbox{]})
\item 
int \hyperlink{calorie_8c_a02d5d248e5e5f6681420662fed46dfdd}{inizializza\+\_\+file\+\_\+assunzione} (char nickname\mbox{[}$\,$\mbox{]})
\item 
int \hyperlink{calorie_8c_aa8c36a190de86246240bc2aa45ab1eca}{stampa\+\_\+database\+\_\+assunzioni} ()
\item 
unsigned short \hyperlink{calorie_8c_adb87f48dc857b9c2aa92873005814c7d}{calcolo\+\_\+kcal\+\_\+totali} (char $\ast$nomefile)
\item 
int \hyperlink{calorie_8c_aacf26004c17e4042071db3f0bc51727c}{modifica\+\_\+assunzione} ()
\item 
short int \hyperlink{calorie_8c_aa9581b3482b7025bf2a7b2fbd15f60e2}{ricerca\+\_\+assunzione\+\_\+database} (\hyperlink{structassunzione}{assunzione} $\ast$nuova\+\_\+assunzione, char nickname\mbox{[}$\,$\mbox{]})
\item 
int \hyperlink{calorie_8c_a1d6ede62ed123e9bec97f4b7941bffb4}{scrittura\+\_\+diretta\+\_\+assunzione} (\hyperlink{structassunzione}{assunzione} $\ast$\hyperlink{structcibo}{cibo}, char nickname\mbox{[}$\,$\mbox{]})
\item 
void \hyperlink{calorie_8c_a5749b56f193b104db97c500a51f4eb10}{istogrami} ()
\end{DoxyCompactItemize}


\subsection{Documentazione delle funzioni}
\mbox{\Hypertarget{calorie_8c_aad23ab12f44405ba4e09e437a448d0b1}\label{calorie_8c_aad23ab12f44405ba4e09e437a448d0b1}} 
\index{calorie.\+c@{calorie.\+c}!aggiorno\+\_\+database\+\_\+calorie@{aggiorno\+\_\+database\+\_\+calorie}}
\index{aggiorno\+\_\+database\+\_\+calorie@{aggiorno\+\_\+database\+\_\+calorie}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{aggiorno\+\_\+database\+\_\+calorie()}{aggiorno\_database\_calorie()}}
{\footnotesize\ttfamily int aggiorno\+\_\+database\+\_\+calorie (\begin{DoxyParamCaption}\item[{char}]{nome\+\_\+consumo\mbox{[}$\,$\mbox{]},  }\item[{int}]{flag\+\_\+consumo,  }\item[{float}]{quantita\+\_\+consumo,  }\item[{char}]{nickname\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}

Funzione aggiorno\+\_\+database\+\_\+calorie ()\+:

La funzione ha il compito di creare una struct di tipo assunzioni e rimpirla con dati significativi, sulla base dei dati passati in ingresso alla stessa.

A tal scopo, dopo aver creato la struct di tipo assunzioni denominata cibo, copierà il nome\+\_\+consumo passato in ingresso nel campo della struct denominato nome. Imposterà il flag con quello passatogli in ingresso e farà altrettanto con la quantità. Fatto ciò, controllerà il flag. Se il flag identifica una ricetta, verrano create due variabile di tipo int (kcal\+\_\+ricetta e dosi\+\_\+ricetta) utilizzate in combinazione con una funzione in moda da poter estrarre da un database di ricette le kcal per un tot di dosi. Grazie a queste informazioni sarà possibile calcolare le kcal per il quantitativo assunto dall\textquotesingle{}utente tramite una funzione. Stesso lavoro verrà fatto in caso di un flag che identifiche un alimento. Infatti, verrà usata una funzione diversa per estrarre da un database apposito l\textquotesingle{}alimento che verrà memorizzato in una struct creata appositamente.

In fine, rimpita la struct cibo, verrà passata ad una funzione di scrittura su file.

\begin{DoxyPrecond}{Precondizione}
Nome\+\_\+consumo non può essere vuoto, flag\+\_\+consumo può assumero solo i valori 1 o 0, il nickname deve appartenere ad uno degli utenti, quindi non può essere vuoto.
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore restituito rappresenta l\textquotesingle{}esito della funzione. 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_a7911299a005ffc33f45edd4e6f6c5a75}\label{calorie_8c_a7911299a005ffc33f45edd4e6f6c5a75}} 
\index{calorie.\+c@{calorie.\+c}!calcolo\+\_\+kcal@{calcolo\+\_\+kcal}}
\index{calcolo\+\_\+kcal@{calcolo\+\_\+kcal}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{calcolo\+\_\+kcal()}{calcolo\_kcal()}}
{\footnotesize\ttfamily unsigned short int calcolo\+\_\+kcal (\begin{DoxyParamCaption}\item[{unsigned short int}]{kcal,  }\item[{int}]{campione,  }\item[{float}]{q\+\_\+consumata }\end{DoxyParamCaption})}

Funzione calcolo\+\_\+kcal ()\+:

La funzione ha il compito di calcolare tramite una proporzione le calorie assunte sulla base delle quantità passategli in ingresso.

A tal scopo utilizzera le variabile di ingresso kcal e campione, dove kcal sta per il valore calorico del campione ricevuto e la quantità.

\begin{DoxyPrecond}{Precondizione}
Il campione non può essere pari a 0, kcal non può essere negativo 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore restituito rappresenta l\textquotesingle{}apporto calorico calcolato. 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_adb87f48dc857b9c2aa92873005814c7d}\label{calorie_8c_adb87f48dc857b9c2aa92873005814c7d}} 
\index{calorie.\+c@{calorie.\+c}!calcolo\+\_\+kcal\+\_\+totali@{calcolo\+\_\+kcal\+\_\+totali}}
\index{calcolo\+\_\+kcal\+\_\+totali@{calcolo\+\_\+kcal\+\_\+totali}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{calcolo\+\_\+kcal\+\_\+totali()}{calcolo\_kcal\_totali()}}
{\footnotesize\ttfamily unsigned short calcolo\+\_\+kcal\+\_\+totali (\begin{DoxyParamCaption}\item[{char $\ast$}]{nomefile }\end{DoxyParamCaption})}

Funzione calcolo\+\_\+kcal\+\_\+totali ()\+:

La funzione ha il compito aprire un file assunzioni legato ad un utente, leggere tutte le struct relative alle assunzioni presenti e memorizzare in una variabile accumulatore le kcal di ciascuna assunzione.

A tal scopo, viene creata una struct di tipo assunzione, per contenere i dati presenti su file, e una variabile tot\+\_\+kcal di accumulazione. Aperto il file, in puntatore va spostato oltre la data posizionata all\textquotesingle{}inizio, per poi proseguire una corretta lettura delle sole assunzioni.

\begin{DoxyPrecond}{Precondizione}
nome\+\_\+file non vuoto 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore restituito è il calcolo delle calorie assunte in totale 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_a02d5d248e5e5f6681420662fed46dfdd}\label{calorie_8c_a02d5d248e5e5f6681420662fed46dfdd}} 
\index{calorie.\+c@{calorie.\+c}!inizializza\+\_\+file\+\_\+assunzione@{inizializza\+\_\+file\+\_\+assunzione}}
\index{inizializza\+\_\+file\+\_\+assunzione@{inizializza\+\_\+file\+\_\+assunzione}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{inizializza\+\_\+file\+\_\+assunzione()}{inizializza\_file\_assunzione()}}
{\footnotesize\ttfamily int inizializza\+\_\+file\+\_\+assunzione (\begin{DoxyParamCaption}\item[{char}]{nickname\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}

Funzione inizializza\+\_\+file\+\_\+assunzione ()\+:

La funzione ha il compito creare una struct di tipo data e assegnarle la data prese dal computer. Fatto ciò, grazie al nickname passato in ingresso aprirà il file, lo resetterà e ci scriverà all\textquotesingle{}inzio la data.

A tal scopo, creata la struct di dipo data, chiamerà una funzione per riempirla. Apre il file in modalità wb e scrive la data tramite un fseek all\textquotesingle{}inizio del file.

\begin{DoxyPrecond}{Precondizione}
Il nickname deve corrispondere a quello di un utente effettivamente esistente, per mantenere un senso logico. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore restituito rappresenta l\textquotesingle{}esito della funzione. 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_a6e41da04fc6821fa1b6bf2bed8e2d307}\label{calorie_8c_a6e41da04fc6821fa1b6bf2bed8e2d307}} 
\index{calorie.\+c@{calorie.\+c}!input\+\_\+alimento\+\_\+consumato@{input\+\_\+alimento\+\_\+consumato}}
\index{input\+\_\+alimento\+\_\+consumato@{input\+\_\+alimento\+\_\+consumato}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{input\+\_\+alimento\+\_\+consumato()}{input\_alimento\_consumato()}}
{\footnotesize\ttfamily int input\+\_\+alimento\+\_\+consumato (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Funzione input\+\_\+alimento\+\_\+consumato ()\+:

La funzione ha il compito di prendere in input da tastiera un alimento/ricetta non presente nel database, per memorizzarlo nel file delle calorie assunte dell\textquotesingle{}utente.

A tal scopo esegue la funzione auteticazzione, per verificare che l\textquotesingle{}utente abbia i diritti di accesso, in caso contrario termina. Verificato ciò, il flag viene impostato automaticamente con una costante che indica si tratti di un alimento/ricetta non presente nei database. La quantità, per le stesse ragioni, viene impostata a 0. Viene richiesto, inoltre, di inserire le calorie in quanto non è possibile calcolarle in quanto non si hann abbastanza informazioni relative a ciò che ha inserito. Opportuni controlli verificheranno che l\textquotesingle{}input sia corretto. Fatto ciò, verrà chiamata una funzione di scrittura diretta su file.

\begin{DoxyPrecond}{Precondizione}
Non vi sono specifiche pre-\/condizioni per la funzione 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore restituito rappresenta l\textquotesingle{}esito della funzione. 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_a90efaa78bd85014349089f4e607720dd}\label{calorie_8c_a90efaa78bd85014349089f4e607720dd}} 
\index{calorie.\+c@{calorie.\+c}!input\+\_\+kcal\+\_\+libere@{input\+\_\+kcal\+\_\+libere}}
\index{input\+\_\+kcal\+\_\+libere@{input\+\_\+kcal\+\_\+libere}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{input\+\_\+kcal\+\_\+libere()}{input\_kcal\_libere()}}
{\footnotesize\ttfamily unsigned short int input\+\_\+kcal\+\_\+libere (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Funzione \hyperlink{calorie_8c_a90efaa78bd85014349089f4e607720dd}{input\+\_\+kcal\+\_\+libere()}

La funzione ha il compito di richiedere l\textquotesingle{}input all\textquotesingle{}utente delle calorie relative ad un assunzione libera. Tale inserimento deve essere un valore short int, e deve essere rispettare i limiti di M\+I\+N\+\_\+\+K\+C\+AL e M\+A\+X\+\_\+\+K\+C\+AL. L\textquotesingle{}input viene iterato fino a quanndo il valore inserito non è valido.

\begin{DoxyPrecond}{Precondizione}
Non ci sono pre condizioni
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore di ritorno deve essere ricevuto in una variabile con adeguato tipo 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_aab4f1124bc81a30708b9520671ef672b}\label{calorie_8c_aab4f1124bc81a30708b9520671ef672b}} 
\index{calorie.\+c@{calorie.\+c}!input\+\_\+nome\+\_\+assunzione@{input\+\_\+nome\+\_\+assunzione}}
\index{input\+\_\+nome\+\_\+assunzione@{input\+\_\+nome\+\_\+assunzione}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{input\+\_\+nome\+\_\+assunzione()}{input\_nome\_assunzione()}}
{\footnotesize\ttfamily char$\ast$ input\+\_\+nome\+\_\+assunzione (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Funzione \hyperlink{calorie_8c_aab4f1124bc81a30708b9520671ef672b}{input\+\_\+nome\+\_\+assunzione()}

La funzione ha il compito di richiedere l\textquotesingle{}input all\textquotesingle{}utente del nome di un assunzione. Il valore inserito deve esere una stringa, di massimo 20 caratteri. Se non viene rispettato questo limite l\textquotesingle{}inserimento è considerato non valido.

L\textquotesingle{}input viene iterato fino a quanndo il valore inserito non è valido.

\begin{DoxyPrecond}{Precondizione}
Non ci sono pre condizioni
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore di ritorno deve essere ricevuto in una variabile con adeguato tipo 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_a5749b56f193b104db97c500a51f4eb10}\label{calorie_8c_a5749b56f193b104db97c500a51f4eb10}} 
\index{calorie.\+c@{calorie.\+c}!istogrami@{istogrami}}
\index{istogrami@{istogrami}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{istogrami()}{istogrami()}}
{\footnotesize\ttfamily void istogrami (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Funzione istogrami ()\+:

La funzione ha il compito aprire un file assunzioni legato ad un utente, il cui nickname è ottenuto tramite una funzione di auteticazione se viene soddisfatta. Si estraggono le calorie che l\textquotesingle{}utente dovrebbe assumere sulla base di ciò che ha inserito sul menu settimanale, tali calorie vengono identificate con degli asterischi\+: un asterisco ($\ast$) rappresenta 200 calorie. Si legge su file quante calorie sono state effettivamente assunto e si stampa su schermo utilizzando lo stesso metodo. L\textquotesingle{}arrotondamento è fatto per eccesso.

\begin{DoxyPrecond}{Precondizione}
nome nickname non vuoto. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore restituito indica l\textquotesingle{}esito della funzione. 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_aacf26004c17e4042071db3f0bc51727c}\label{calorie_8c_aacf26004c17e4042071db3f0bc51727c}} 
\index{calorie.\+c@{calorie.\+c}!modifica\+\_\+assunzione@{modifica\+\_\+assunzione}}
\index{modifica\+\_\+assunzione@{modifica\+\_\+assunzione}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{modifica\+\_\+assunzione()}{modifica\_assunzione()}}
{\footnotesize\ttfamily int modifica\+\_\+assunzione (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Funzione modifica\+\_\+assunzione ()\+:

La funzione ha il compito aprire un file assunzioni legato ad un utente, leggere tutte le struct presenti e estrarre e modificare la struct richiesta dall\textquotesingle{}untente, per poi salvarne le modifiche.

A tal scopo, effettuata l\textquotesingle{}autenticazione, viene aperto il file corrispondente all\textquotesingle{}utente autenticato. Viene richiesto all\textquotesingle{}utente di inserire il nome dell\textquotesingle{}alimento/ricetta da modicare, ricercata tale ricetta tramite una funzione e modificata in modo diverso in base al suo flag. Se il flag indica un input libero, viene richiesto esclusivamente l\textquotesingle{}input delle kcal, zero per eliminare l\textquotesingle{}alimento. se il flag indica una ricetta o un alimento, verrà richiesto l\textquotesingle{}input della nuova quantità e le kcal verranno calcolate grazie a delle funzioni apposite.

\begin{DoxyPrecond}{Precondizione}
non sono presenti pre requisiti. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore restituito indica l\textquotesingle{}esito della funzione. 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_aa9581b3482b7025bf2a7b2fbd15f60e2}\label{calorie_8c_aa9581b3482b7025bf2a7b2fbd15f60e2}} 
\index{calorie.\+c@{calorie.\+c}!ricerca\+\_\+assunzione\+\_\+database@{ricerca\+\_\+assunzione\+\_\+database}}
\index{ricerca\+\_\+assunzione\+\_\+database@{ricerca\+\_\+assunzione\+\_\+database}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{ricerca\+\_\+assunzione\+\_\+database()}{ricerca\_assunzione\_database()}}
{\footnotesize\ttfamily short int ricerca\+\_\+assunzione\+\_\+database (\begin{DoxyParamCaption}\item[{\hyperlink{structassunzione}{assunzione} $\ast$}]{nuova\+\_\+assunzione,  }\item[{char}]{nickname\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}

Funzione ricerca\+\_\+assunzione\+\_\+database ()\+:

La funzione ha il compito aprire un file assunzioni legato ad un utente, il cui nickname viene passato in ingresso, e ricercare nel file un assunzione con il nome corrispondente al nome passato in ingresso.

A tal scopo, aperto il file, sposta il puntatore dopo la data scritta su file e inizia a leggere il suo contenuto attraverso un while, se viene trovata la struct con nome corrispondente al nome passato in ingresso, un return permette l\textquotesingle{}uscita dalla funzione. Nel while è presente un contatore, in modo che la funzione possa restituire tale contatore, quindi la posizione della struct trovata su file.

\begin{DoxyPrecond}{Precondizione}
nome dell\textquotesingle{}assunzione da cercare e nickname non vuoti. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore restituito indica l\textquotesingle{}esito della funzione o la posizione della struct trovata. 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_a1d6ede62ed123e9bec97f4b7941bffb4}\label{calorie_8c_a1d6ede62ed123e9bec97f4b7941bffb4}} 
\index{calorie.\+c@{calorie.\+c}!scrittura\+\_\+diretta\+\_\+assunzione@{scrittura\+\_\+diretta\+\_\+assunzione}}
\index{scrittura\+\_\+diretta\+\_\+assunzione@{scrittura\+\_\+diretta\+\_\+assunzione}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{scrittura\+\_\+diretta\+\_\+assunzione()}{scrittura\_diretta\_assunzione()}}
{\footnotesize\ttfamily int scrittura\+\_\+diretta\+\_\+assunzione (\begin{DoxyParamCaption}\item[{\hyperlink{structassunzione}{assunzione} $\ast$}]{cibo,  }\item[{char}]{nickname\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}

Funzione scrittura\+\_\+diretta\+\_\+assunzione ()\+:

La funzione ha il compito aprire un file assunzioni legato ad un utente, il cui nickname viene passato in ingresso, e scrivere su file la struct cibo passata in ingresso

A tal scopo, aperto il file, si effettua un controllo sulla data. Se la data corrispondente alla data odierna, si passa alla scrittura su file, altrimenti viene chiamata una funzione che resetta il file e scrive la data odierna su di esso, procedendo alla scrittura solo successivamente.

\begin{DoxyPrecond}{Precondizione}
nome nickname non vuoto. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore restituito indica l\textquotesingle{}esito della funzione. 
\end{DoxyPostcond}
\mbox{\Hypertarget{calorie_8c_aa8c36a190de86246240bc2aa45ab1eca}\label{calorie_8c_aa8c36a190de86246240bc2aa45ab1eca}} 
\index{calorie.\+c@{calorie.\+c}!stampa\+\_\+database\+\_\+assunzioni@{stampa\+\_\+database\+\_\+assunzioni}}
\index{stampa\+\_\+database\+\_\+assunzioni@{stampa\+\_\+database\+\_\+assunzioni}!calorie.\+c@{calorie.\+c}}
\subsubsection{\texorpdfstring{stampa\+\_\+database\+\_\+assunzioni()}{stampa\_database\_assunzioni()}}
{\footnotesize\ttfamily int stampa\+\_\+database\+\_\+assunzioni (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Funzione stampa\+\_\+database\+\_\+assunzioni ()\+:

La funzione ha il compito aprire un file assunzioni legato ad un utente e stampare il suo contenuto su schermo.

A tal scopo, effetua un autenticazione per veficare i diritti di accesso a tali informazioni. Chiamata la funzione che si occupa di tale compito, grazie alla stessa prende i dati relativi all\textquotesingle{}utente auteticato e li usa per aprire il file corrispondente. Effettua un cotrollo sull\textquotesingle{}esistenza del file, in caso non esista lo crea tramite scrivi\+\_\+data() Nel caso esista, posiziona il puntatore ad inzio file e legge la data scritta il tale posizione, stampando su schermo tale data. Procede succesivamente alla lettura delle assunzioni e della loro stampa su schermo. Infine, procede alla chiamata di una funzione per il calcolo delle kcal totali.

\begin{DoxyPrecond}{Precondizione}
Non sono presenti pre requisiti. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondizione}
Il valore restituito rappresenta l\textquotesingle{}esito della funzione. 
\end{DoxyPostcond}
